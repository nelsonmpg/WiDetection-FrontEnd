{
  "name": "shell-interval",
  "version": "1.0.0",
  "author": {
    "name": "Scott Ivey",
    "email": "scott.ivey@gmail.com",
    "url": "https://github.com/scivey"
  },
  "description": "setInterval for the command line, with an option to stop after N repetitions.",
  "main": "index.js",
  "bin": {
    "shell-interval": "./bin/cmd.js"
  },
  "scripts": {
    "test": "mocha ./test"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/scivey/shell-interval"
  },
  "keywords": [
    "shell",
    "every",
    "interval",
    "command",
    "execute",
    "watch",
    "watcher",
    "command",
    "cli"
  ],
  "preferGlobal": true,
  "license": "MIT",
  "dependencies": {
    "argparse": "~0.1.15",
    "lodash": "~1.3.1"
  },
  "devDependencies": {
    "sinon": "~1.7.3",
    "mocha": "~1.12.1"
  },
  "readme": "# shell-interval\r\n\r\n####`setInterval` for the command line.\r\n\r\n---\r\n\r\n```\r\nnpm install -g shell-interval\r\n```\r\n\r\n```Shell\r\n$   shell-interval -t 5 -c \"echo Hello.\" -r 3\r\n\r\nHello.      # 0:05\r\nHello.      # 0:10\r\nHello.      # 0:15\r\n            # [stop]\r\n```\r\n```js\r\nvar shellInterval = require(\"shell-interval\");\r\nshellInterval({\r\n    options: {\r\n        command: \"echo ten seconds has passed\",\r\n        time: 10,\r\n        reps: 5,\r\n    },\r\n    onExec: function(err, stdout, stderr) {\r\n        if (err) throw err;\r\n        console.log(stdout);\r\n    },\r\n    onFinish: function() {\r\n        console.log(\"The shell command was called five times. Exiting...\");\r\n    },\r\n        \r\n});\r\n```\r\n\r\n\r\n\r\n## Shell Usage\r\n\r\n####Parameters\r\n* __-c, --command__ :       \r\n    The quote-delimited shell command to execute.\r\n* __-t, --time__    :   \r\n    The second interval between calls\r\n* __-r, --reps__    :   \r\n    The number of times to execute the command.  Default is infinite.\r\n* __-q, --quiet__   :   \r\n    Don't log stdout to the terminal. (boolean flag)\r\n* __-e, --eager__ :     \r\n    Execute the shell command once immediately, before starting the timer. (boolean flag)\r\n\r\n#### Examples\r\n\r\n* `shell-interval -c \"[command]\" -t 2` : Execute the `[command]` every ~ two seconds indefinitely, until a kill signal is received. (e.g. `^c`)\r\n\r\n* `shell-interval -c \"[command]\" -t 5 -r 10` : Execute the `[command]` every ~five seconds until the command has been called ten times, and then exit.  `Command` is first invoked ~five seconds after the call to `shell-interval`.\r\n\r\n* `shell-interval -c \"[command]\" -t 5 -r 10 -e` : Execute the `[command]` every ~five seconds until the command has been called ten times, and then exit.  Because the `-e` (`--eager`) flag was passed, the command is first executed as soon as node finishes initializing the script.\r\n\r\n##Node API\r\n\r\nThe `shell-interval` module exports a single function with the same options as its command-line interface as well as hooks for two callbacks.  These callbacks can handle data returned from the shell calls (`onExec`) and perform any necessary cleanup after a finite series of shell calls has completed (`onFinish`).\r\n```js\r\nvar shellInterval = require(\"shell-interval\");\r\nvar timeout_id = shellInterval({\r\n    options: /* object */ ,\r\n    \r\n    onExec: /* callback function */,\r\n    \r\n    onFinish: /* callback function */,\r\n});\r\n```\r\n* __Arguments :__  A single hash of parameters with three properties.\r\n\r\n\r\n    * __`options` [object] :__ a hash of values corresponding to set-interval's CLI flags. __Required.__\r\n    \r\n        * `command` __[string] :__ the shell command to execute. __Required.__\r\n        \r\n        * `time` __[number] :__ the number of seconds between calls. __Required.__\r\n        \r\n        * `reps` __[number] :__ a number of total shell calls to make.  After this number is reached, the interval will be cleared. _Optional._\r\n        \r\n        * `eager` __[boolean] :__ whether to immediately execute the function once before starting the timer. _Optional._\r\n        \r\n        * `quiet` __[boolean] :__ when used with the default `onExec` handler, tells set-interval not to print `stdout` to the terminal. _Optional._\r\n\r\n    * `onExec` __[function] :__ a callback to handle data returned from shell command execution.  It is invoked once for each shell call and receives `err`, `stdout`, and `stderr` as its arguments. _Optional._\r\n    \r\n    * `onFinish` __[function] :__ when a limited number of repetitions is specified(in `options.reps`), this callback is invoked after the last shell call has returned a value and been handled. _Optional. Only has an effect if `reps` is specified._\r\n\r\n* __Return Value__: a reference to the Node.js `timeoutId` assigned to shell-interval's internal timer.  This can be used with `clearInterval(<id>)` to stop executing the shell command.  \r\n\r\n([See the Node.js documentation on __timeoutId__.](http://nodejs.org/api/timers.html))\r\n    \r\n    \r\n    \r\n####Basic Usage\r\nBoth callbacks are optional, but the hash of parameters passed in must contain an `options` property.  `options` itself must be a hash containing at least `command` and `time` properties.\r\n\r\n```js\r\nshellInterval({\r\n    options: {\r\n        command: \"echo Hello.\",\r\n        time: 5,\r\n    },\r\n});\r\n\r\n// echoes \"Hello\" in the terminal every five seconds\r\n// until a break signal is received.\r\n\r\n```\r\nMore usefully, client code can supply two optional callback functions: one for each of the `onExec` and `onFinish` events.\r\n\r\n* `onExec` is invoked once for every execution of the shell command, and receives `err`, `stdout` and `stderr` as its arguments. \r\n* `onFinish` is only called if a finite number of repetitions has been specified (via `options.reps` in node or `-r <number>` in the shell).  In this case it is called exactly once, **after** the last callback has returned its value and been handled.  It does not receive any arguments.\r\n\r\n\r\n```js\r\nshellInterval({\r\n            options: {\r\n                command: \"echo Hello.\",\r\n                time: 2,\r\n                reps: 3,\r\n            },\r\n            onExec: function(err, stdout, stderr) {\r\n                if (err) throw err;\r\n                console.log(\"Output: \" + stdout);\r\n            },\r\n            onFinish: function() {\r\n                console.log(\"Finished.\")                \r\n            },           \r\n});\r\n```\r\nThe default `onExec` handler logs the shell response to the terminal unless the `--quiet` flag is passed.  Because this default handler is overridden by passing in a callback, the `--quiet` flag will not affect the behavior of a client-provided function.\r\n\r\n\r\n\r\n####Usage in Place of `setInterval`\r\nThe function exported by `shell-interval` returns the Node `timeoutId` set by shell-interval internally, it can be used as a transparent replacement for a `setInterval` call in many cases where periodic shell execution is needed.  Most importantly, the return value can be passed to the normal `clearInterval` function to stop executing the shell command.\r\n\r\n```js\r\nvar shellInterval = require(\"shell-interval\");\r\n\r\nvar intervalId = shellInterval({\r\n                options: {\r\n                    command: \"echo Hello.\",\r\n                    time: 5,\r\n                },\r\n                onExec: function(err, stdout, stderr) {\r\n                    if (err) throw err;\r\n                    console.log(stdout);\r\n                    if( /* some condition */ ) {\r\n                        clearInterval(intervalId);\r\n                    }\r\n                },\r\n});\r\n```\r\n\r\n##Use Cases\r\n__shell-interval__ provides similar functionality to [watch](https://github.com/visionmedia/watch), but in native Javascript and with a programmatic interface for Node.\r\n\r\nTimed shell calls can be paired with a target- and dependency-based build program like [make](http://www.gnu.org/software/make/) to produce a flexible, automatic build system with far less configuration than e.g. [grunt-watch](https://github.com/gruntjs/grunt-contrib-watch).\r\n```shell\r\n$   shell-interval -c \"make\" -t 10\r\n\r\nmake: nothing to be done for 'all'.     #[0:10]\r\nmake: nothing to be done for 'all'.     #[0:20]\r\n\r\n\r\n    # a dependency is changed between 0:20 and 0:30\r\n    \r\njshint ./modules/*.js                  #[0:30]\r\ncat ./modules/*.js > ./build/out.js    #[0:36]\r\nmocha test ./build/spec                #[0:41]\r\n\r\nmake: noting to be done for 'all'.     #[0:50]\r\nmake: noting to be done for 'all'.     #[1:00]\r\n# ... ad infinitum\r\n\r\n```\r\n\r\n\r\n## Installation\r\nVia [npm](http://npmjs.org):\r\n\r\n```\r\nnpm install -g shell-interval\r\n```\r\n\r\n## Testing\r\nThe specs depend on [Sinon](http://sinonjs.org/) and [Mocha](http://visionmedia.github.io/mocha/).  Both are included in the devDependencies of package.json.\r\n\r\n```\r\nnpm test\r\n```\r\n\r\n##Bugs and Issues\r\nUse the [GitHub issue tracker](https://github.com/scivey/shell-interval/issues).\r\n\r\n##Development\r\n[See the GitHub page.](https://github.com/scivey/shell-interval)\r\n\r\nPull requests are welcome.  Include Mocha-compatible test specs and documentation of any changes to the API.\r\n\r\n## License\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2013 Scott Ivey, <scott.ivey@gmail.com>\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n",
  "readmeFilename": "Readme.md",
  "bugs": {
    "url": "https://github.com/scivey/shell-interval/issues"
  },
  "_id": "shell-interval@1.0.0",
  "dist": {
    "shasum": "ed0f7a28969f1253bafce1129404bf727537ec21",
    "tarball": "http://registry.npmjs.org/shell-interval/-/shell-interval-1.0.0.tgz"
  },
  "_from": "shell-interval@*",
  "_npmVersion": "1.3.4",
  "_npmUser": {
    "name": "scivey",
    "email": "scott.ivey@gmail.com"
  },
  "maintainers": [
    {
      "name": "scivey",
      "email": "scott.ivey@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "ed0f7a28969f1253bafce1129404bf727537ec21",
  "_resolved": "https://registry.npmjs.org/shell-interval/-/shell-interval-1.0.0.tgz"
}
